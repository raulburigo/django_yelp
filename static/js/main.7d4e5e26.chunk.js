(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{32:function(e,t,a){e.exports=a(60)},60:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(29),l=a.n(c),u=a(10),s=a(1),o=a(18),i=a(2),m=a.n(i),p=a(6),v=a(4),d=a(30),f=a.n(d).a.create({baseURL:"http://127.0.0.1:8000/api/v1/restaurants/"}),E=Object(n.createContext)(),b=function(e){var t=Object(n.useState)([]),a=Object(v.a)(t,2),c=a[0],l=a[1],u=Object(n.useState)([]),s=Object(v.a)(u,2),i=s[0],d=s[1],b=Object(n.useState)(!0),g=Object(v.a)(b,2),h=g[0],j=g[1];Object(n.useEffect)((function(){function e(){return(e=Object(p.a)(m.a.mark((function e(){var t;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,f.get("");case 2:t=e.sent,l(t.data.data.restaurants);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}(function(){return e.apply(this,arguments)})().catch((function(e){return console.log(e)})),j(!0)}),[l,h]);return r.a.createElement(E.Provider,{value:{restaurants:c,setRestaurants:l,addRestaurant:function(e){l([].concat(Object(o.a)(c),[e]))},addReview:function(e){d([].concat(Object(o.a)(i),[e]))},newReviews:i,setIsUpdated:j}},e.children)};var g=function(){var e=Object(n.useContext)(E).addRestaurant,t=Object(n.useState)(""),a=Object(v.a)(t,2),c=a[0],l=a[1],u=Object(n.useState)(""),s=Object(v.a)(u,2),o=s[0],i=s[1],d=Object(n.useState)("Price Range"),b=Object(v.a)(d,2),g=b[0],h=b[1],j=function(){var t=Object(p.a)(m.a.mark((function t(a){var n;return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a.preventDefault(),t.prev=1,t.next=4,f.post("",{name:c,location:o,price_range:g});case 4:n=t.sent,console.log(n),e(n.data.data.restaurant),l(""),i(""),h("Price Range"),t.next=15;break;case 12:t.prev=12,t.t0=t.catch(1),console.log(t.t0);case 15:case"end":return t.stop()}}),t,null,[[1,12]])})));return function(e){return t.apply(this,arguments)}}();return r.a.createElement("div",{className:"mb-4"},r.a.createElement("form",{onSubmit:j},r.a.createElement("div",{className:"form-row"},r.a.createElement("div",{className:"col"},r.a.createElement("input",{className:"form-control",type:"text",required:!0,placeholder:"restaurant name",value:c,onChange:function(e){return l(e.target.value)}})),r.a.createElement("div",{className:"col"},r.a.createElement("input",{className:"form-control",type:"text",required:!0,placeholder:"restaurant location",value:o,onChange:function(e){return i(e.target.value)}})),r.a.createElement("div",{className:"col"},r.a.createElement("select",{className:"custom-select",value:g,onChange:function(e){return h(e.target.value)}},r.a.createElement("option",{disabled:!0},"Price Range"),r.a.createElement("option",{value:"1"},"$"),r.a.createElement("option",{value:"2"},"$$"),r.a.createElement("option",{value:"3"},"$$$"),r.a.createElement("option",{value:"4"},"$$$$"),r.a.createElement("option",{value:"5"},"$$$$$"))),r.a.createElement("button",{type:"submit",className:"btn btn-primary"},"Add"))))};var h=function(){return r.a.createElement("div",null,r.a.createElement("h1",{className:"font-weight-light display-1 text-center"},"Restaurant Finder"))};var j=function(e){for(var t=e.rating,a=[],c="fas fa-star text-warning",l="fas fa-star-half-alt text-warning",u="far fa-star text-warning",s=1;s<=5;s++)s<=t?a.push(r.a.createElement("i",{key:s,className:c})):s-t<=.5?a.push(r.a.createElement("i",{key:s,className:l})):a.push(r.a.createElement("i",{key:s,className:u}));return r.a.createElement(n.Fragment,null,a)};var x=function(){var e=Object(n.useContext)(E),t=e.restaurants,a=e.setRestaurants,c=Object(s.f)(),l=function(){var e=Object(p.a)(m.a.mark((function e(n,r){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n.stopPropagation(),e.prev=1,e.next=4,f.delete("/".concat(r));case 4:a(t.filter((function(e){return e.id!==r}))),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(1),console.log(e.t0);case 10:case"end":return e.stop()}}),e,null,[[1,7]])})));return function(t,a){return e.apply(this,arguments)}}();return r.a.createElement("div",{className:"list-group"},r.a.createElement("table",{className:"table table-hover table-dark"},r.a.createElement("thead",null,r.a.createElement("tr",{className:"bg-primary text-center"},r.a.createElement("th",{scope:"col"},"Restaurant"),r.a.createElement("th",{scope:"col"},"Location"),r.a.createElement("th",{scope:"col"},"Price Range"),r.a.createElement("th",{scope:"col"},"Ratings"),r.a.createElement("th",{scope:"col"},"Edit"),r.a.createElement("th",{scope:"col"},"Delete"))),r.a.createElement("tbody",null,t&&t.map((function(e){return r.a.createElement("tr",{key:e.id,onClick:function(){return t=e.id,void c.push("/restaurants/".concat(t));var t}},r.a.createElement("td",null,e.name),r.a.createElement("td",null,e.location),r.a.createElement("td",null,"$".repeat(e.price_range)),e.count>0?r.a.createElement("td",null,r.a.createElement(j,{rating:e.avg_rating}),r.a.createElement("span",{className:"text-warning"},"(",e.count,")")):r.a.createElement("td",null,r.a.createElement("span",{className:"text-warning"},"no reviews")),r.a.createElement("td",null,r.a.createElement("button",{onClick:function(t){return function(e,t){e.stopPropagation(),c.push("/restaurants/".concat(t,"/update"))}(t,e.id)},className:"btn btn-warning"},"Update")),r.a.createElement("td",null,r.a.createElement("button",{onClick:function(t){return l(t,e.id)},className:"btn btn-danger"},"Delete")))})))))};var O=function(){return r.a.createElement("div",null,r.a.createElement(h,null),r.a.createElement(g,null),r.a.createElement(x,null))};var w=function(){var e=Object(n.useState)(""),t=Object(v.a)(e,2),a=t[0],c=t[1],l=Object(n.useState)(""),u=Object(v.a)(l,2),o=u[0],i=u[1],d=Object(n.useState)(0),b=Object(v.a)(d,2),g=b[0],h=b[1],j=Object(s.g)().id,x=Object(n.useContext)(E).addReview,O=r.a.createElement("i",{className:"fas fa-star"}),w=r.a.createElement("i",{className:"far fa-star"}),N=function(){var e=Object(p.a)(m.a.mark((function e(t){var a;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),0!==g){e.next=5;break}alert("You must give at least one star"),e.next=18;break;case 5:return e.prev=5,e.next=8,f.post("/".concat(j,"/addreview/"),{user:2,review:o,rating:g});case 8:a=e.sent,x(a),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(5),console.log(e.t0);case 15:c(""),i(""),h(0);case 18:case"end":return e.stop()}}),e,null,[[5,12]])})));return function(t){return e.apply(this,arguments)}}();return r.a.createElement("div",{className:"mb-2"},r.a.createElement("form",{onSubmit:N},r.a.createElement("div",{className:"form-row"},r.a.createElement("div",{className:"form-group col-8"},r.a.createElement("label",{htmlFor:"name"},"Name"),r.a.createElement("input",{required:!0,className:"form-control",placeholder:"user name",value:a,onChange:function(e){return c(e.target.value)},type:"text"})),r.a.createElement("div",{className:"form-group col-3 offset-1"},r.a.createElement("label",{htmlFor:"rating"},"Rating"),r.a.createElement("div",null,r.a.createElement("span",{onClick:function(){return h(1)},value:1},g>=1?O:w),r.a.createElement("span",{onClick:function(){return h(2)},value:2},g>=2?O:w),r.a.createElement("span",{onClick:function(){return h(3)},value:3},g>=3?O:w),r.a.createElement("span",{onClick:function(){return h(4)},value:4},g>=4?O:w),r.a.createElement("span",{onClick:function(){return h(5)},value:5},g>=5?O:w)))),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{htmlFor:"review"},"Review"),r.a.createElement("textarea",{required:!0,id:"review",value:o,onChange:function(e){return i(e.target.value)},className:"form-control"})),r.a.createElement("button",{type:"submit",className:"btn btn-primary btn-small"},"Add Review")))};var N=function(e){var t=e.reviews;return r.a.createElement("div",{className:"row row-cols-3 mb-2"},t&&t.map((function(e){return r.a.createElement("div",{key:e.id,className:"card text-white bg-primary mb-3 mr-4",style:{maxWidth:"30%"}},r.a.createElement("div",{className:"card-header d-flex justify-content-between"},r.a.createElement("span",{style:{fontWeight:"600"}},e.name),r.a.createElement("span",null,r.a.createElement(j,{rating:e.rating}))),r.a.createElement("div",{className:"card-body"},r.a.createElement("p",{className:"card-text"},e.review)))})))};var y=function(){var e=Object(s.g)().id,t=Object(n.useState)({}),a=Object(v.a)(t,2),c=a[0],l=a[1],o=Object(n.useContext)(E).newReviews;return Object(n.useEffect)((function(){function t(){return(t=Object(p.a)(m.a.mark((function t(){var a;return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,f.get("".concat(e));case 2:a=t.sent,l(a.data.data.restaurant);case 4:case"end":return t.stop()}}),t)})))).apply(this,arguments)}(function(){return t.apply(this,arguments)})().catch((function(e){return console.log(e)}))}),[e,o]),r.a.createElement(n.Fragment,null,c&&r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"my-3 text-center"},r.a.createElement("h1",{className:"font-weight-light display-3"},c.name),c.count>0?r.a.createElement(r.a.Fragment,null,r.a.createElement(j,{rating:c.avg_rating}),r.a.createElement("span",null," (".concat(c.count,") | "))):r.a.createElement("span",null,"no reviews yet | "),r.a.createElement(u.b,{to:"/restaurants/".concat(c.id,"/update")},"Update restaurant")),r.a.createElement(N,{reviews:c.reviews}),r.a.createElement(w,null)))};var $=function(){var e=Object(s.g)().id,t=Object(n.useState)(""),a=Object(v.a)(t,2),c=a[0],l=a[1],u=Object(n.useState)(""),o=Object(v.a)(u,2),i=o[0],d=o[1],b=Object(n.useState)("Price Range"),g=Object(v.a)(b,2),h=g[0],j=g[1],x=Object(s.f)(),O=Object(n.useContext)(E).setIsUpdated;Object(n.useEffect)((function(){function t(){return(t=Object(p.a)(m.a.mark((function t(){var a;return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,f.get("".concat(e));case 2:a=t.sent,l(a.data.data.restaurant.name),d(a.data.data.restaurant.location),j(a.data.data.restaurant.price_range);case 6:case"end":return t.stop()}}),t)})))).apply(this,arguments)}(function(){return t.apply(this,arguments)})().catch((function(e){return console.log(e)}))}),[e]);var w=function(){var t=Object(p.a)(m.a.mark((function t(a){return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a.preventDefault(),t.prev=1,t.next=4,f.put("".concat(e,"/"),{name:c,location:i,price_range:h});case 4:O(!1),x.push("/"),t.next=11;break;case 8:t.prev=8,t.t0=t.catch(1),console.log(t.t0);case 11:case"end":return t.stop()}}),t,null,[[1,8]])})));return function(e){return t.apply(this,arguments)}}();return r.a.createElement("div",null,r.a.createElement("form",{onSubmit:w},r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{htmlFor:"name"},"Name"),r.a.createElement("input",{className:"form-control",type:"text",required:!0,placeholder:"restaurant name",value:c,onChange:function(e){return l(e.target.value)}})),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{htmlFor:"location"},"Location"),r.a.createElement("input",{className:"form-control",type:"text",required:!0,placeholder:"restaurant location",value:i,onChange:function(e){return d(e.target.value)}})),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{htmlFor:"price_range"},"Price Range"),r.a.createElement("select",{className:"custom-select",value:h,onChange:function(e){return j(e.target.value)}},r.a.createElement("option",{disabled:!0},"Price Range"),r.a.createElement("option",{value:"1"},"$"),r.a.createElement("option",{value:"2"},"$$"),r.a.createElement("option",{value:"3"},"$$$"),r.a.createElement("option",{value:"4"},"$$$$"),r.a.createElement("option",{value:"5"},"$$$$$"))),r.a.createElement("button",{type:"submit",className:"btn btn-primary"},"Update")))};var k=function(){return r.a.createElement("div",null,r.a.createElement("h1",{className:"text-center"},"Update Restaurant"),r.a.createElement($,null))},R=function(){return r.a.createElement(b,null,r.a.createElement("div",{className:"container"},r.a.createElement(u.a,null,r.a.createElement(s.c,null,r.a.createElement(s.a,{exact:!0,path:"/",component:O}),r.a.createElement(s.a,{exact:!0,path:"/restaurants/:id",component:y}),r.a.createElement(s.a,{exact:!0,path:"/restaurants/:id/update",component:k})))))};l.a.render(r.a.createElement(R,null),document.getElementById("root"))}},[[32,1,2]]]);
//# sourceMappingURL=main.7d4e5e26.chunk.js.map